!function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.mapper={})}(function(a,b){function c(b,c,d){if("function"==typeof c)for(var e=c(d),f=0;f<b.length;f++){var g=c(b[f]);if(g==e)return b[f]}else for(var e=d[c],f=0;f<b.length;f++){var g=a.utils.unwrapObservable(b[f][c]);if(g==e)return b[f]}return null}function d(a){return null==a?null:a instanceof Array?"array":a instanceof Date?"date":a instanceof RegExp?"regex":typeof a}b.fromJS=function(a,c,e,f){var g="auto";return c&&c.$fromJS&&(c=c.$fromJS),c?c.$handler?g=c.$handler.fromJS||c.$handler:"string"==d(c)&&(g=c):c={},"function"==typeof g?g(a,c,e,f):b.handlers[g].fromJS(a,c,e,f)},b.toJS=function(a,c){var e="auto";return c&&c.$toJS&&(c=c.$toJS),c?c.$handler?e=c.$handler.toJS||c.$handler:"string"==d(c)&&(e=c):c={},"function"==typeof e?e(a,c):b.handlers[e].toJS(a,c)},b.fromJSON=function(c,d,e,f){return b.fromJS(a.utils.parseJson(c),d,e,f)},b.toJSON=function(c,d){return a.utils.stringifyJson(b.toJS(c,d))},b.resolveFromJSHandler=function(a){var b=d(a);return"array"==b?"array":"object"==b?"object":"value"},b.resolveToJSHandler=function(b){var c=a.utils.unwrapObservable(b),e=d(c);return"array"==e?"array":"object"==e?"object":"value"},b.handlers={},b.handlers.auto={fromJS:function(a,c,d,e){var f=b.resolveFromJSHandler(a,c,d,e);return b.handlers[f].fromJS(a,c,d,e)},toJS:function(a,c){var d=b.resolveToJSHandler(a,c);return b.handlers[d].toJS(a,c)}},b.ignore={},b.handlers.ignore={fromJS:function(){return b.ignore},toJS:function(){return b.ignore}},b.handlers.copy={fromJS:function(a){return a},toJS:function(a){return a}},b.handlers.value={fromJS:function(b,c,d,e){return a.isObservable(d)&&(e||void 0==e||null==e)?(d(b),d):e?a.observable(b):b},toJS:function(b){return a.utils.unwrapObservable(b)}},b.handlers.array={fromJS:function(d,e,f,g){var h,i=a.utils.unwrapObservable(f),j=e.$key&&i,k=e.$itemOptions;"function"==typeof k&&(k=k());var l=!1;if(e.$merge){l=!0,h=i||[];for(var m=0;m<d.length;m++){var n=j?c(i,e.$key,d[m]):null,o=b.fromJS(d[m],k,n);o===b.ignore||n||h.push(o)}}else{h=[];for(var m=0;m<d.length;m++){var n=j?c(i,e.$key,d[m]):null,o=b.fromJS(d[m],k,n);l||(l=i&&m<i.length?i[m]!==o:!0),o!==b.ignore&&h.push(o)}}return g||void 0==g||null==g?a.isObservable(f)?(l&&f(h),f):a.observableArray(h):h},toJS:function(c,d){for(var e=a.utils.unwrapObservable(c),f=[],g=0;g<e.length;g++){var h=d.$itemOptions;"function"==typeof h&&(h=h(c,d));var i=b.toJS(e[g],h);i!==b.ignore&&f.push(i)}return f}},b.handlers.object={fromJS:function(c,d,e,f){var g=a.utils.unwrapObservable(e);g||(g=d.$type?new d.$type:{});for(var h in c){var i=b.fromJS(c[h],d[h]||d.$default,g[h],!0);i!==b.ignore&&g[h]!=i&&(g[h]=i)}return a.isObservable(e)&&(f||void 0==f||null==f)?(e(g),e):f?a.observable(g):g},toJS:function(c,d){var e=a.utils.unwrapObservable(c),f={};for(var g in e){var h=b.toJS(e[g],d[g]||d.$default);h!==b.ignore&&(f[g]=h)}return f}}});