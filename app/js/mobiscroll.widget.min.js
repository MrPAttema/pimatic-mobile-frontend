!function(a,b,c,d){var e,f,g=a.extend,h=a.mobiscroll,i=h.instances,j=h.userdef,k=h.util,l=k.jsPrefix,m=k.has3d,n=k.getCoord,o=k.constrain,p=k.isString,q=/android [1-3]/i.test(navigator.userAgent),r="webkitAnimationEnd animationend",s=function(){},t=function(a){a.preventDefault()};h.classes.Widget=function(k,u,v){function w(b){O&&O.removeClass("dwb-a"),O=a(this),O.hasClass("dwb-d")||O.hasClass("dwb-nhl")||O.addClass("dwb-a"),"mousedown"===b.type&&a(c).on("mouseup",x)}function x(b){O&&(O.removeClass("dwb-a"),O=null),"mouseup"===b.type&&a(c).off("mouseup",x)}function y(a){13==a.keyCode?db.select():27==a.keyCode&&db.cancel()}function z(a){a||K.focus(),db.ariaMessage(Y.ariaMessage)}function A(b){var c,g,j,k=Y.focusOnClose;H.remove(),e&&!b&&setTimeout(function(){if(k===d||k===!0){f=!0,c=e[0],j=c.type,g=c.value;try{c.type="button"}catch(b){}e.focus(),c.type=j,c.value=g}else k&&(i[a(k).attr("id")]&&(h.tapped=!1),a(k).focus())},200),db._isVisible=!1,D("onHide",[])}function B(a){clearTimeout(gb[a.type]),gb[a.type]=setTimeout(function(){var b="scroll"==a.type;(!b||Z)&&db.position(!b)},200)}function C(b){h.tapped||(b&&b(),a(c.activeElement).is("input,textarea")&&a(c.activeElement).blur(),e=eb,db.show()),setTimeout(function(){f=!1},300)}function D(b,c){var d;return c.push(db),a.each([j,_,W,u],function(a,e){e&&e[b]&&(d=e[b].apply(k,c))}),d}var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,ab,bb,cb,db=this,eb=a(k),fb=[],gb={};db.position=function(b){var e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v=0,w=0,x={},y=Math.min(L[0].innerWidth||L.innerWidth(),J.width()),z=L[0].innerHeight||L.innerHeight();bb===y&&cb===z&&b||X||((db._isFullScreen||/top|bottom/.test(Y.display))&&K.width(y),D("onPosition",[H,y,z])!==!1&&R&&(t=L.scrollLeft(),u=L.scrollTop(),h=Y.anchor===d?eb:a(Y.anchor),db._isLiquid&&"liquid"!==Y.layout&&(400>y?H.addClass("dw-liq"):H.removeClass("dw-liq")),!db._isFullScreen&&/modal|bubble/.test(Y.display)&&(M.width(""),a(".mbsc-w-p",H).each(function(){e=a(this).outerWidth(!0),v+=e,w=e>w?e:w}),e=v>y?w:v,M.width(e).css("white-space",v>y?"":"nowrap")),T=db._isFullScreen?y:K.outerWidth(),U=db._isFullScreen?z:K.outerHeight(!0),Z=z>=U&&y>=T,db.scrollLock=Z,"modal"==Y.display?(f=Math.max(0,t+(y-T)/2),g=u+(z-U)/2):"bubble"==Y.display?(s=!0,n=a(".dw-arrw-i",H),k=h.offset(),l=Math.abs(F.offset().top-k.top),m=Math.abs(F.offset().left-k.left),i=h.outerWidth(),j=h.outerHeight(),f=o(m-(K.outerWidth(!0)-i)/2,t+3,t+y-T-3),g=l-U,u>g||l>u+z?(K.removeClass("dw-bubble-top").addClass("dw-bubble-bottom"),g=l+j):K.removeClass("dw-bubble-bottom").addClass("dw-bubble-top"),p=n.outerWidth(),q=o(m+i/2-(f+(T-p)/2),0,p),a(".dw-arr",H).css({left:q})):(f=t,"top"==Y.display?g=u:"bottom"==Y.display&&(g=u+z-U)),g=0>g?0:g,x.top=g,x.left=f,K.css(x),J.height(0),r=Math.max(g+U,"body"==Y.context?a(c).height():F[0].scrollHeight),J.css({height:r}),s&&(g+U>u+z||l>u+z)&&(X=!0,setTimeout(function(){X=!1},300),L.scrollTop(Math.min(g+U-z,r-z))),bb=y,cb=z))},db.attachShow=function(a,b){fb.push(a),"inline"!==Y.display&&($&&a.on("mousedown.dw",function(a){a.preventDefault()}),Y.showOnFocus&&a.on("focus.dw",function(){f||C(b)}),Y.showOnTap&&db.tap(a,function(){C(b)}))},db.select=function(){R&&db.hide(!1,"set")===!1||(db._fillValue(),D("onSelect",[db._value]))},db.cancel=function(){R&&db.hide(!1,"cancel")===!1||D("onCancel",[db._value])},db.clear=function(){D("onClear",[H]),R&&!db.live&&db.hide(!1,"clear"),db.setValue(null,!0)},db.enable=function(){Y.disabled=!1,db._isInput&&eb.prop("disabled",!1)},db.disable=function(){Y.disabled=!0,db._isInput&&eb.prop("disabled",!0)},db.show=function(c,e){var f;Y.disabled||db._isVisible||(P!==!1&&("top"==Y.display&&(P="slidedown"),"bottom"==Y.display&&(P="slideup")),db._readValue(),D("onBeforeShow",[]),f='<div lang="'+Y.lang+'" class="mbsc-'+Y.theme+(Y.baseTheme?" mbsc-"+Y.baseTheme:"")+" dw-"+Y.display+" "+(Y.cssClass||"")+(db._isLiquid?" dw-liq":"")+(q?" mbsc-old":"")+(Q?"":" dw-nobtn")+'"><div class="dw-persp">'+(R?'<div class="dwo"></div>':"")+"<div"+(R?' role="dialog" tabindex="-1"':"")+' class="dw'+(Y.rtl?" dw-rtl":" dw-ltr")+'">'+("bubble"===Y.display?'<div class="dw-arrw"><div class="dw-arrw-i"><div class="dw-arr"></div></div></div>':"")+'<div class="dwwr"><div aria-live="assertive" class="dw-aria dw-hidden"></div>'+(Y.headerText?'<div class="dwv">'+(p(Y.headerText)?Y.headerText:"")+"</div>":"")+'<div class="dwcc">',f+=db._generateContent(),f+="</div>",Q&&(f+='<div class="dwbc">',a.each(N,function(a,b){b=p(b)?db.buttons[b]:b,"set"===b.handler&&(b.parentClass="dwb-s"),"cancel"===b.handler&&(b.parentClass="dwb-c"),b.handler=p(b.handler)?db.handlers[b.handler]:b.handler,f+="<div"+(Y.btnWidth?' style="width:'+100/N.length+'%"':"")+' class="dwbw '+(b.parentClass||"")+'"><div tabindex="0" role="button" class="dwb'+a+" dwb-e "+(b.cssClass===d?Y.btnClass:b.cssClass)+(b.icon?" mbsc-ic mbsc-ic-"+b.icon:"")+'">'+(b.text||"")+"</div></div>"}),f+="</div>"),f+="</div></div></div></div>",H=a(f),J=a(".dw-persp",H),I=a(".dwo",H),M=a(".dwwr",H),G=a(".dwv",H),K=a(".dw",H),E=a(".dw-aria",H),db._markup=H,db._header=G,db._isVisible=!0,V="orientationchange resize",db._markupReady(),D("onMarkupReady",[H]),R?(a(b).on("keydown",y),Y.scrollLock&&H.on("touchmove mousewheel DOMMouseScroll",function(a){Z&&a.preventDefault()}),"Moz"!==l&&a("input,select,button",F).each(function(){this.disabled||a(this).addClass("dwtd").prop("disabled",!0)}),V+=" scroll",h.activeInstance=db,H.appendTo(F),m&&P&&!c&&H.addClass("dw-in dw-trans").on(r,function(){H.off(r).removeClass("dw-in dw-trans").find(".dw").removeClass("dw-"+P),z(e)}).find(".dw").addClass("dw-"+P)):eb.is("div")?eb.html(H):H.insertAfter(eb),D("onMarkupInserted",[H]),db.position(),L.on(V,B),H.on("selectstart mousedown",t).on("click",".dwb-e",t).on("keydown",".dwb-e",function(b){32==b.keyCode&&(b.preventDefault(),b.stopPropagation(),a(this).click())}),setTimeout(function(){a.each(N,function(b,c){db.tap(a(".dwb"+b,H),function(a){c=p(c)?db.buttons[c]:c,c.handler.call(this,a,db)},!0)}),Y.closeOnOverlay&&db.tap(I,function(){db.cancel()}),R&&!P&&z(e),H.on("touchstart mousedown",".dwb-e",w).on("touchend",".dwb-e",x),db._attachEvents(H)},300),D("onShow",[H,db._tempValue]))},db.hide=function(c,d,e){return!db._isVisible||!e&&!db._isValid&&"set"==d||!e&&D("onClose",[db._tempValue,d])===!1?!1:(H&&("Moz"!==l&&a(".dwtd",F).each(function(){a(this).prop("disabled",!1).removeClass("dwtd")}),m&&R&&P&&!c&&!H.hasClass("dw-trans")?H.addClass("dw-out dw-trans").find(".dw").addClass("dw-"+P).on(r,function(){A(c)}):A(c),L.off(V,B)),void(R&&(a(b).off("keydown",y),delete h.activeInstance)))},db.ariaMessage=function(a){E.html(""),setTimeout(function(){E.html(a)},100)},db.isVisible=function(){return db._isVisible},db.setValue=s,db._generateContent=s,db._attachEvents=s,db._readValue=s,db._fillValue=s,db._markupReady=s,db._processSettings=s,db.tap=function(a,b,c){var d,e,f;Y.tap&&a.on("touchstart.dw",function(a){c&&a.preventDefault(),d=n(a,"X"),e=n(a,"Y"),f=!1}).on("touchmove.dw",function(a){(Math.abs(n(a,"X")-d)>20||Math.abs(n(a,"Y")-e)>20)&&(f=!0)}).on("touchend.dw",function(a){var c=this;f||(a.preventDefault(),b.call(c,a)),h.tapped=!0,setTimeout(function(){h.tapped=!1},500)}),a.on("click.dw",function(a){h.tapped||b.call(this,a),a.preventDefault()})},db.option=function(a,b){var c={};"object"==typeof a?c=a:c[a]=b,db.init(c)},db.destroy=function(){db.hide(!0,!1,!0),a.each(fb,function(a,b){b.off(".dw")}),db._isInput&&$&&(k.readOnly=ab),D("onDestroy",[]),delete i[k.id],db=null},db.getInst=function(){return db},db.trigger=D,db.init=function(c){db.settings=Y={},g(u,c),g(Y,h.defaults,db._defaults,j,u),_=h.themes[Y.theme]||h.themes.mobiscroll,S=h.i18n[Y.lang],D("onThemeLoad",[S,u]),g(Y,_,S,j,u),W=h.presets[db._class][Y.preset],Y.buttons=Y.buttons||("inline"!==Y.display?["set","cancel"]:[]),Y.headerText=Y.headerText===d?"inline"!==Y.display?"{value}":!1:Y.headerText,W&&(W=W.call(k,db),g(Y,W,u)),h.themes[Y.theme]||(Y.theme="mobiscroll"),db._isLiquid="liquid"===(Y.layout||(/top|bottom/.test(Y.display)?"liquid":"")),db._processSettings(),eb.off(".dw"),P=q?!1:Y.animate,N=Y.buttons,R="inline"!==Y.display,$=Y.showOnFocus||Y.showOnTap,L=a("body"==Y.context?b:Y.context),F=a(Y.context),db.context=L,db.live=!0,a.each(N,function(a,b){return"set"===b||"set"===b.handler?(db.live=!1,!1):void 0}),db.buttons.set={text:Y.setText,handler:"set"},db.buttons.cancel={text:db.live?Y.closeText:Y.cancelText,handler:"cancel"},db.buttons.clear={text:Y.clearText,handler:"clear"},db._isInput=eb.is("input"),Q=N.length>0,db._isVisible&&db.hide(!0,!1,!0),R?(db._readValue(),db._isInput&&$&&(ab===d&&(ab=k.readOnly),k.readOnly=!0),db.attachShow(eb)):db.show(),eb.on("change.dw",function(){db._preventChange||db.setVal(eb.val(),!0,!1),db._preventChange=!1}),D("onInit",[])},db.buttons={},db.handlers={set:db.select,cancel:db.cancel,clear:db.clear},db._value=null,db._isValid=!0,db._isVisible=!1,v||(i[k.id]=db,db.init(u))},h.classes.Widget.prototype._defaults={lang:"en",setText:"Set",selectedText:"Selected",closeText:"Close",cancelText:"Cancel",clearText:"Clear",disabled:!1,closeOnOverlay:!0,showOnFocus:!0,showOnTap:!0,display:"modal",scrollLock:!0,tap:!0,btnClass:"dwb",btnWidth:!0,focusOnClose:!1},h.themes.mobiscroll={rows:5,showLabel:!1,headerText:!1,btnWidth:!1,selectedLineHeight:!0,selectedLineBorder:1,dateOrder:"MMddyy",weekDays:"min",checkIcon:"ion-ios7-checkmark-empty",btnPlusClass:"mbsc-ic mbsc-ic-arrow-down5",btnMinusClass:"mbsc-ic mbsc-ic-arrow-up5",btnCalPrevClass:"mbsc-ic mbsc-ic-arrow-left5",btnCalNextClass:"mbsc-ic mbsc-ic-arrow-right5"},a(b).on("focus",function(){e&&(f=!0)}),a(c).on("mouseover mouseup mousedown click",function(a){return h.tapped?(a.stopPropagation(),a.preventDefault(),!1):void 0})}(jQuery,window,document);