!function(a,b){var c=a.mobiscroll,d=c.datetime,e=new Date,f={startYear:e.getFullYear()-100,endYear:e.getFullYear()+1,separator:" ",dateFormat:"mm/dd/yy",dateOrder:"mmddy",timeWheels:"hhiiA",timeFormat:"hh:ii A",dayText:"Day",yearText:"Year",hourText:"Hours",minuteText:"Minutes",ampmText:"&nbsp;",secText:"Seconds",nowText:"Now"},g=function(e){function g(a,c,d){return W[c]!==b?+a[W[c]]:d!==b?d:X[c](fa)}function h(a,b,c,d){a.push({values:c,keys:b,label:d})}function i(a,b,c,d){return Math.min(d,Math.floor(a/b)*b+c)}function j(a){return R.getYear(a)}function k(a){return R.getMonth(a)}function l(a){return R.getDay(a)}function m(a){var b=a.getHours();return b=da&&b>=12?b-12:b,i(b,ha,na,qa)}function n(a){return i(a.getMinutes(),ia,oa,ra)}function o(a){return i(a.getSeconds(),ja,pa,sa)}function p(a){return ca&&a.getHours()>11?1:0}function q(a){if(null===a)return a;var b=g(a,"h",0);return R.getDate(g(a,"y"),g(a,"m"),g(a,"d",1),g(a,"a",0)?b+12:b,g(a,"i",0),g(a,"s",0))}function r(a,b,c){return Math.floor((c-b)/a)*a+b}function s(a,b){var c,d,e=!1,f=!1,g=0,h=0;if(t(a))return a;if(la>a&&(a=la),a>ma&&(a=ma),c=a,d=a,2!==b)for(e=t(c);!e&&ma>c;)c=new Date(c.getTime()+864e5),e=t(c),g++;if(1!==b)for(f=t(d);!f&&d>la;)d=new Date(d.getTime()-864e5),f=t(d),h++;return 1===b&&e?c:2===b&&f?d:g>h&&f?d:c}function t(a){return la>a?!1:a>ma?!1:u(a,Z)?!0:u(a,Y)?!1:!0}function u(a,b){var c,d,e;if(b)for(d=0;d<b.length;d++)if(c=b[d],e=c+"",!c.start)if(c.getTime){if(a.getFullYear()==c.getFullYear()&&a.getMonth()==c.getMonth()&&a.getDate()==c.getDate())return!0}else if(e.match(/w/i)){if(e=+e.replace("w",""),e==a.getDay())return!0}else if(e=e.split("/"),e[1]){if(e[0]-1==a.getMonth()&&e[1]==a.getDate())return!0}else if(e[0]==a.getDate())return!0;return!1}function v(a,b,c,d,e,f,g){var h,i,j;if(a)for(h=0;h<a.length;h++)if(i=a[h],j=i+"",!i.start)if(i.getTime)R.getYear(i)==b&&R.getMonth(i)==c&&(f[R.getDay(i)-1]=g);else if(j.match(/w/i))for(j=+j.replace("w",""),H=j-d;e>H;H+=7)H>=0&&(f[H]=g);else j=j.split("/"),j[1]?j[0]-1==c&&(f[j[1]-1]=g):f[j[0]-1]=g}function w(c,d,e,f,g,h,j,k,l){var m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F={},G={h:ha,i:ia,s:ja,a:1},H=R.getDate(g,h,j),I=["a","h","i","s"];c&&(a.each(c,function(a,b){b.start&&(b.apply=!1,m=b.d,n=m+"",o=n.split("/"),m&&(m.getTime&&g==R.getYear(m)&&h==R.getMonth(m)&&j==R.getDay(m)||!n.match(/w/i)&&(o[1]&&j==o[1]&&h==o[0]-1||!o[1]&&j==o[0])||n.match(/w/i)&&H.getDay()==+n.replace("w",""))&&(b.apply=!0,F[H]=!0))}),a.each(c,function(c,f){if(z=0,A=0,w=0,x=b,r=!0,s=!0,B=!1,f.start&&(f.apply||!f.d&&!F[H])){for(p=f.start.split(":"),q=f.end.split(":"),v=0;3>v;v++)p[v]===b&&(p[v]=0),q[v]===b&&(q[v]=59),p[v]=+p[v],q[v]=+q[v];for(p.unshift(p[0]>11?1:0),q.unshift(q[0]>11?1:0),da&&(p[1]>=12&&(p[1]=p[1]-12),q[1]>=12&&(q[1]=q[1]-12)),v=0;d>v;v++)T[v]!==b&&(t=i(p[v],G[I[v]],O[I[v]],P[I[v]]),u=i(q[v],G[I[v]],O[I[v]],P[I[v]]),C=0,D=0,E=0,da&&1==v&&(C=p[0]?12:0,D=q[0]?12:0,E=T[0]?12:0),r||(t=0),s||(u=P[I[v]]),(r||s)&&t+C<T[v]+E&&T[v]+E<u+D&&(B=!0),T[v]!=t&&(r=!1),T[v]!=u&&(s=!1));if(!l)for(v=d+1;4>v;v++)p[v]>0&&(z=G[e]),q[v]<P[I[v]]&&(A=G[e]);B||(t=i(p[d],G[e],O[e],P[e])+z,u=i(q[d],G[e],O[e],P[e])-A,r&&(w=y(k,t,P[e],0)),s&&(x=y(k,u,P[e],1))),(r||s||B)&&(l?a(".dw-li",k).slice(w,x).addClass("dw-v"):a(".dw-li",k).slice(w,x).removeClass("dw-v"))}}))}function x(b,c){return a(".dw-li",b).index(a('.dw-li[data-val="'+c+'"]',b))}function y(b,c,d,e){return 0>c?0:c>d?a(".dw-li",b).length:x(b,c)+e}function z(a){var c,d=[];if(null===a||a===b)return a;for(c in W)d[W[c]]=X[c](a);return d}function A(a){var b,c,d,e=[];if(a){for(b=0;b<a.length;b++)if(c=a[b],c.start&&c.start.getTime)for(d=new Date(c.start);d<=c.end;)e.push(new Date(d.getFullYear(),d.getMonth(),d.getDate())),d.setDate(d.getDate()+1);else e.push(c);return e}return a}var B,C=a(this),D={};if(C.is("input")){switch(C.attr("type")){case"date":B="yy-mm-dd";break;case"datetime":B="yy-mm-ddTHH:ii:ssZ";break;case"datetime-local":B="yy-mm-ddTHH:ii:ss";break;case"month":B="yy-mm",D.dateOrder="mmyy";break;case"time":B="HH:ii:ss"}var E=C.attr("min"),F=C.attr("max");E&&(D.minDate=d.parseDate(B,E)),F&&(D.maxDate=d.parseDate(B,F))}var G,H,I,J,K,L,M,N,O,P,Q=a.extend({},e.settings),R=a.extend(e.settings,c.datetime.defaults,f,D,Q),S=0,T=[],U=[],V=[],W={},X={y:j,m:k,d:l,h:m,i:n,s:o,a:p},Y=R.invalid,Z=R.valid,$=R.preset,_=R.dateOrder,aa=R.timeWheels,ba=_.match(/D/),ca=aa.match(/a/i),da=aa.match(/h/),ea="datetime"==$?R.dateFormat+R.separator+R.timeFormat:"time"==$?R.timeFormat:R.dateFormat,fa=new Date,ga=R.steps||{},ha=ga.hour||R.stepHour||1,ia=ga.minute||R.stepMinute||1,ja=ga.second||R.stepSecond||1,ka=ga.zeroBased,la=R.minDate||new Date(R.startYear,0,1),ma=R.maxDate||new Date(R.endYear,11,31,23,59,59),na=ka?0:la.getHours()%ha,oa=ka?0:la.getMinutes()%ia,pa=ka?0:la.getSeconds()%ja,qa=r(ha,na,da?11:23),ra=r(ia,oa,59),sa=r(ia,oa,59);if(B=B||ea,$.match(/date/i)){for(a.each(["y","m","d"],function(a,b){G=_.search(new RegExp(b,"i")),G>-1&&V.push({o:G,v:b})}),V.sort(function(a,b){return a.o>b.o?1:-1}),a.each(V,function(a,b){W[b.v]=a}),K=[],H=0;3>H;H++)if(H==W.y){for(S++,J=[],I=[],L=R.getYear(la),M=R.getYear(ma),G=L;M>=G;G++)I.push(G),J.push((_.match(/yy/i)?G:(G+"").substr(2,2))+(R.yearSuffix||""));h(K,I,J,R.yearText)}else if(H==W.m){for(S++,J=[],I=[],G=0;12>G;G++){var ta=_.replace(/[dy]/gi,"").replace(/mm/,(9>G?"0"+(G+1):G+1)+(R.monthSuffix||"")).replace(/m/,G+1+(R.monthSuffix||""));I.push(G),J.push(ta.match(/MM/)?ta.replace(/MM/,'<span class="dw-mon">'+R.monthNames[G]+"</span>"):ta.replace(/M/,'<span class="dw-mon">'+R.monthNamesShort[G]+"</span>"))}h(K,I,J,R.monthText)}else if(H==W.d){for(S++,J=[],I=[],G=1;32>G;G++)I.push(G),J.push((_.match(/dd/i)&&10>G?"0"+G:G)+(R.daySuffix||""));h(K,I,J,R.dayText)}U.push(K)}if($.match(/time/i)){for(N=!0,V=[],a.each(["h","i","s","a"],function(a,b){a=aa.search(new RegExp(b,"i")),a>-1&&V.push({o:a,v:b})}),V.sort(function(a,b){return a.o>b.o?1:-1}),a.each(V,function(a,b){W[b.v]=S+a}),K=[],H=S;S+4>H;H++)if(H==W.h){for(S++,J=[],I=[],G=na;(da?12:24)>G;G+=ha)I.push(G),J.push(da&&0===G?12:aa.match(/hh/i)&&10>G?"0"+G:G);h(K,I,J,R.hourText)}else if(H==W.i){for(S++,J=[],I=[],G=oa;60>G;G+=ia)I.push(G),J.push(aa.match(/ii/)&&10>G?"0"+G:G);h(K,I,J,R.minuteText)}else if(H==W.s){for(S++,J=[],I=[],G=pa;60>G;G+=ja)I.push(G),J.push(aa.match(/ss/)&&10>G?"0"+G:G);h(K,I,J,R.secText)}else if(H==W.a){S++;var ua=aa.match(/A/);h(K,[0,1],ua?[R.amText.toUpperCase(),R.pmText.toUpperCase()]:[R.amText,R.pmText],R.ampmText)}U.push(K)}return e.getVal=function(a){return e._hasValue||a?q(e.getArrayVal(a)):null},e.setDate=function(a,b,c,d,f){e.setArrayVal(z(a),b,f,d,c)},e.getDate=e.getVal,e.format=ea,e.order=W,e.handlers.now=function(){e.setDate(new Date,!1,.3,!0,!0)},e.buttons.now={text:R.nowText,handler:"now"},Y=A(Y),Z=A(Z),la=q(z(la)),ma=q(z(ma)),O={y:la.getFullYear(),m:0,d:1,h:na,i:oa,s:pa,a:0},P={y:ma.getFullYear(),m:11,d:31,h:qa,i:ra,s:sa,a:1},{wheels:U,headerText:R.headerText?function(){return d.formatDate(ea,q(e.getArrayVal(!0)),R)}:!1,formatResult:function(a){return d.formatDate(B,q(a),R)},parseValue:function(a){return z(a?d.parseDate(B,a,R):R.defaultValue||new Date)},validate:function(c,d,f,h){var i=s(q(e.getArrayVal(!0)),h),j=z(i),k=g(j,"y"),l=g(j,"m"),m=!0,n=!0;a.each(["y","m","d","a","h","i","s"],function(d,e){if(W[e]!==b){var f=O[e],h=P[e],i=31,o=g(j,e),p=a(".dw-ul",c).eq(W[e]);if("d"==e&&(i=R.getMaxDayOfMonth(k,l),h=i,ba&&a(".dw-li",p).each(function(){var b=a(this),c=b.data("val"),d=R.getDate(k,l,c).getDay(),e=_.replace(/[my]/gi,"").replace(/dd/,(10>c?"0"+c:c)+(R.daySuffix||"")).replace(/d/,c+(R.daySuffix||""));a(".dw-i",b).html(e.match(/DD/)?e.replace(/DD/,'<span class="dw-day">'+R.dayNames[d]+"</span>"):e.replace(/D/,'<span class="dw-day">'+R.dayNamesShort[d]+"</span>"))})),m&&la&&(f=X[e](la)),n&&ma&&(h=X[e](ma)),"y"!=e){var q=x(p,f),r=x(p,h);a(".dw-li",p).removeClass("dw-v").slice(q,r+1).addClass("dw-v"),"d"==e&&a(".dw-li",p).removeClass("dw-h").slice(i).addClass("dw-h")}if(f>o&&(o=f),o>h&&(o=h),m&&(m=o==f),n&&(n=o==h),"d"==e){var s=R.getDate(k,l,1).getDay(),t={};v(Y,k,l,s,i,t,1),v(Z,k,l,s,i,t,0),a.each(t,function(b,c){c&&a(".dw-li",p).eq(b).removeClass("dw-v")})}}}),N&&a.each(["a","h","i","s"],function(d,f){var i=g(j,f),m=g(j,"d"),n=a(".dw-ul",c).eq(W[f]);W[f]!==b&&(w(Y,d,f,j,k,l,m,n,0),w(Z,d,f,j,k,l,m,n,1),T[d]=+e.getValidCell(i,n,h).val)}),e._tempWheelArray=j}}};a.each(["date","time","datetime"],function(a,b){c.presets.scroller[b]=g})}(jQuery);