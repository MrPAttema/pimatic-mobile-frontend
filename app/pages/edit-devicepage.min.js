(function(){$(document).on("pagebeforecreate",function(a){var b,c;if(null==pimatic.pages.editDevicepage){b=function(){function a(){this.pageTitle=ko.computed(function(a){return function(){return"add"===a.action()?__("Add New Page"):__("Edit Page")}}(this)),pimatic.autoFillId(this.pageName,this.pageId,this.action)}return a.prototype.action=ko.observable("add"),a.prototype.pageName=ko.observable(""),a.prototype.pageId=ko.observable(""),a.prototype.resetFields=function(){return this.pageName(""),this.pageId("")},a.prototype.onSubmit=function(){var a;return pimatic.isValidId(this.pageId())?(a={pageId:this.pageId(),page:{name:this.pageName()}},function(){switch(this.action()){case"add":return pimatic.client.rest.addPage(a);case"update":return pimatic.client.rest.updatePage(a);default:throw new Error("Illegal devicepage action: "+action())}}.call(this).done(function(a){return a.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1):void alert(__(pimatic.invalidIdMessage))},a.prototype.onRemove=function(){var a;return a=confirm(__("Do you really want to delete the %s page?",this.pageName())),a?(pimatic.client.rest.removePage({pageId:this.pageId()}).done(function(a){return a.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1):void 0},a}();try{pimatic.pages.editDevicepage=new b}catch(d){c=d,TraceKit.report(c)}}}),$(document).on("pagecreate","#edit-devicepage-page",function(a){var b;try{return ko.applyBindings(pimatic.pages.editDevicepage,$("#edit-devicepage-page")[0])}catch(c){return b=c,TraceKit.report(b)}}),$(document).on("pagebeforeshow","#edit-devicepage-page",function(a){var b,c,d;b=pimatic.pages.editDevicepage,d=jQuery.mobile.pageParams,jQuery.mobile.pageParams={},"update"===(null!=d?d.action:void 0)?(c=d.page,b.action("update"),b.pageId(c.id),b.pageName(c.name())):(b.resetFields(),b.action("add"))})}).call(this);