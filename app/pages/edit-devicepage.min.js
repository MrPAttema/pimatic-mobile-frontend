(function(){$(document).on("pagebeforecreate",function(){var a,b;if(null==pimatic.pages.editDevicepage){a=function(){function a(){this.pageTitle=ko.computed(function(a){return function(){return __("add"===a.action()?"Add New Page":"Edit Page")}}(this)),pimatic.autoFillId(this.pageName,this.pageId,this.action)}return a.prototype.action=ko.observable("add"),a.prototype.pageName=ko.observable(""),a.prototype.pageId=ko.observable(""),a.prototype.resetFields=function(){return this.pageName(""),this.pageId("")},a.prototype.onSubmit=function(){var a;return pimatic.isValidId(this.pageId())?(a={pageId:this.pageId(),page:{name:this.pageName()}},function(){switch(this.action()){case"add":return pimatic.client.rest.addPage(a);case"update":return pimatic.client.rest.updatePage(a);default:throw new Error("Illegal devicepage action: "+action())}}.call(this).done(function(a){return a.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1):void alert(__(pimatic.invalidIdMessage))},a.prototype.onRemove=function(){var a;return a=confirm(__("Do you really want to delete the %s page?",this.pageName())),a?(pimatic.client.rest.removePage({pageId:this.pageId()}).done(function(a){return a.success?$.mobile.changePage("#devicepages-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1):void 0},a}();try{pimatic.pages.editDevicepage=new a}catch(c){b=c,TraceKit.report(b)}}}),$(document).on("pagecreate","#edit-devicepage-page",function(){var a;try{return ko.applyBindings(pimatic.pages.editDevicepage,$("#edit-devicepage-page")[0])}catch(b){return a=b,TraceKit.report(a)}}),$(document).on("pagebeforeshow","#edit-devicepage-page",function(){var a,b,c;a=pimatic.pages.editDevicepage,c=jQuery.mobile.pageParams,jQuery.mobile.pageParams={},"update"===(null!=c?c.action:void 0)?(b=c.page,a.action("update"),a.pageId(b.id),a.pageName(b.name())):(a.resetFields(),a.action("add"))})}).call(this);