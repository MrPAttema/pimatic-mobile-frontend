(function(){$(document).on("pagecreate","#updates-page",function(){var a,b,c;a=function(){function a(){this.updateProcessStatus=pimatic.updateProcessStatus,this.updateProcessMessages=pimatic.updateProcessMessages,this.hasUpdates=ko.computed(function(a){return function(){var b;return(null!=(b=a.pimaticUpdateInfo())?b.outdated:void 0)||a.outdatedPlugins().length>0}}(this)),this.pimaticUpdateInfoText=ko.computed(function(a){return function(){var b;return b=a.pimaticUpdateInfo(),null==b?"":b.outdated?__("Found update for %s: current version is %s, latest version is: %s","pimatic",b.outdated.current,b.outdated.latest):__("pimatic is up to date.")}}(this)),this.pluginUpdateInfoText=ko.computed(function(a){return function(){var b,c;return b=a.outdatedPlugins(),null==b?[]:0===b.length?[__("All plugins are up to date.")]:function(){var a,d,e;for(e=[],a=0,d=b.length;d>a;a++)c=b[a],e.push(__("Found update for %s: current version is %s, latest version is: %s",c.plugin,c.current,c.latest));return e}()}}(this))}return a.prototype.pimaticUpdateInfo=ko.observable(null),a.prototype.outdatedPlugins=ko.observableArray(null),a.prototype.installUpdatesClicked=function(){var a,b;return a=this.pimaticUpdateInfo().outdated?["pimatic"]:[],a=a.concat(function(){var a,c,d,e;for(d=this.outdatedPlugins(),e=[],a=0,c=d.length;c>a;a++)b=d[a],e.push(b.plugin);return e}.call(this)),pimatic.client.rest.installUpdatesAsync({modules:a}).fail(function(){return function(a,b,c){return"timeout"!==b?ajaxAlertFail(a,b,c):void 0}}(this))},a.prototype.restart=function(){return pimatic.client.rest.restart({}).fail(ajaxAlertFail)},a.prototype.searchForPimaticUpdate=function(){return pimatic.client.rest.isPimaticOutdated().done(function(a){return function(b){a.pimaticUpdateInfo(b)}}(this)).fail(ajaxAlertFail)},a.prototype.searchForOutdatedPlugins=function(){return pimatic.client.rest.getOutdatedPlugins().done(function(a){return function(b){a.outdatedPlugins(b.outdatedPlugins)}}(this)).fail(ajaxAlertFail)},a}();try{pimatic.pages.updates=c=new a,ko.applyBindings(c,$("#updates-page")[0])}catch(d){b=d,TraceKit.report(b)}}),$(document).on("pageshow","#updates-page",function(){var a,b;try{return b=pimatic.pages.updates,b.searchForPimaticUpdate(),b.searchForOutdatedPlugins()}catch(c){return a=c,TraceKit.report(a)}})}).call(this);