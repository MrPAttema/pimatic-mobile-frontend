(function(){$(document).on("pagebeforecreate",function(a){var b,c;if(null==pimatic.pages.editGroup){b=function(){function a(){this.pageTitle=ko.computed(function(a){return function(){return"add"===a.action()?__("Add New Group"):__("Edit Group")}}(this)),pimatic.autoFillId(this.groupName,this.groupId,this.action)}return a.prototype.action=ko.observable("add"),a.prototype.groupName=ko.observable(""),a.prototype.groupId=ko.observable(""),a.prototype.resetFields=function(){return this.groupName(""),this.groupId("")},a.prototype.onSubmit=function(){var a;return pimatic.isValidId(this.groupId())?(a={groupId:this.groupId(),group:{name:this.groupName()}},function(){switch(this.action()){case"add":return pimatic.client.rest.addGroup(a);case"update":return pimatic.client.rest.updateGroup(a);default:throw new Error("Illegal devicegroup action: "+action())}}.call(this).done(function(a){return a.success?$.mobile.changePage("#groups-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1):void alert(__(pimatic.invalidIdMessage))},a.prototype.onRemove=function(){var a;return a=confirm(__("Do you really want to delete the %s group?",this.groupName())),a&&pimatic.client.rest.removeGroup({groupId:this.groupId()}).done(function(a){return a.success?$.mobile.changePage("#groups-page",{transition:"slide",reverse:!0}):alert(a.error)}).fail(ajaxAlertFail),!1},a}();try{pimatic.pages.editGroup=new b}catch(d){c=d,TraceKit.report(c)}}}),$(document).on("pagecreate","#edit-group-page",function(a){var b;try{return ko.applyBindings(pimatic.pages.editGroup,$("#edit-group-page")[0])}catch(c){return b=c,TraceKit.report(b)}}),$(document).on("pagebeforeshow","#edit-group-page",function(a){var b,c,d;b=pimatic.pages.editGroup,d=jQuery.mobile.pageParams,jQuery.mobile.pageParams={},"update"===(null!=d?d.action:void 0)?(c=d.group,b.action("update"),b.groupId(c.id),b.groupName(c.name())):(b.resetFields(),b.action("add"))})}).call(this);