(function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}};a=pimatic.tryCatch,$(document).on("pagebeforecreate","#devicepages-page",a(function(c){var d,e;return d=function(){function c(){this.onEditDevicepageClicked=b(this.onEditDevicepageClicked,this),this.onAddDevicepageClicked=b(this.onAddDevicepageClicked,this),this.onDevicepagesSorted=b(this.onDevicepagesSorted,this),this.devicepages=pimatic.devicepages,this.devicepagesListViewRefresh=ko.computed(a(function(a){return function(){return a.devicepages(),a.isSortingDevicepages(),a.enabledEditing(),pimatic["try"](function(){return $("#devicepages").listview("refresh").addClass("dark-background")})}}(this))).extend({rateLimit:{timeout:1,method:"notifyWhenChangesStop"}}),this.lockButton=ko.computed(a(function(a){return function(){var b;return b=a.enabledEditing(),{icon:b?"check":"gear"}}}(this)))}return c.prototype.enabledEditing=ko.observable(!0),c.prototype.isSortingDevicepages=ko.observable(!1),c.prototype.afterRenderDevicepage=function(a,b){var c;return c=$("#sortable-handle-template").text(),$(a).find("a").before($(c))},c.prototype.toggleEditing=function(){return this.enabledEditing(!this.enabledEditing())},c.prototype.onDevicepagesSorted=function(a,b,c){var d,e,f,g,h;for(e=[],null==b&&e.push(a.id),h=this.devicepages(),f=0,g=h.length;g>f;f++)d=h[f],d!==a&&(e.push(d.id),null!=b&&d===b&&e.push(a.id));return pimatic.client.rest.updatePageOrder({pageOrder:e}).done(ajaxShowToast).fail(ajaxAlertFail)},c.prototype.onDropDevicepageOnTrash=function(a){var b,c;return c=confirm(__("Do you really want to delete the %s devicepage?",a.name())),c?(b=function(b){return function(){return pimatic.loading("deletedevicepage","show",{text:__("Saving")}),pimatic.client.rest.removePage({pageId:a.id}).always(function(){return pimatic.loading("deletedevicepage","hide")}).done(ajaxShowToast).fail(ajaxAlertFail)}}(this))():void 0},c.prototype.onAddDevicepageClicked=function(){return jQuery.mobile.pageParams={action:"add"},!0},c.prototype.onEditDevicepageClicked=function(a){return jQuery.mobile.pageParams={action:"update",page:a},!0},c}(),pimatic.pages.devicepages=e=new d})),$(document).on("pagecreate","#devicepages-page",a(function(a){var b,c,d;b=pimatic.pages.devicepages;try{ko.applyBindings(b,$("#devicepages-page")[0])}catch(e){c=e,TraceKit.report(c),null!=(d=pimatic.storage)&&d.removeAll(),window.location.reload()}$("#devicepages .handle").disableSelection()})),$(document).on("pagebeforeshow","#devicepages-page",a(function(a){return pimatic["try"](function(a){return function(){return $("#devicepages").listview("refresh").addClass("dark-background")}}(this))}))}).call(this);