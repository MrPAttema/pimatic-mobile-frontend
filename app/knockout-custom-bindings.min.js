(function(){var a=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};!function(){var b,c;return c=function(a,b){var c,d;return d=function(){var b,d,e,f;for(e=a.attr("class").split(" "),f=[],b=0,d=e.length;d>b;b++)c=e[b],0!==c.lastIndexOf("ui-icon-")&&f.push(c);return f}(),d.push("ui-icon-"+b),a.attr("class",d.join(" "))},ko.bindingHandlers.jqmbutton={init:function(a,b,c){var d,e,f;e=b(),f=ko.unwrap(e),d=$(a)},update:function(a,b,d){var e,f,g,h,i,j,k;if(j=b(),k=ko.unwrap(j),e=$(a),null!=k.text&&(i=ko.unwrap(k.text),e.text(i)),null!=k.icon&&(h=ko.unwrap(k.icon),c(e,h)),null!=k.enabled)if(g=ko.unwrap(k.enabled))try{e.button("enable")}catch(l){f=l,e.removeClass("ui-state-disabled")}else try{e.button("disable")}catch(l){f=l,e.addClass("ui-state-disabled")}}},ko.bindingHandlers.jqmlistitem={update:function(a,b,d){var e,f,g,h;return g=b(),h=ko.unwrap(g),e=$(a),null!=g.icon?(f=ko.unwrap(g.icon),c(e,f)):void 0}},ko.bindingHandlers.jqmenabled={update:function(a,b,c){var d,e,f;switch(e=b(),f=ko.unwrap(e),d=$(a),a.type){case"select-one":null!=d.data("mobileFlipswitch")?f?d.flipswitch("enable"):d.flipswitch("disable"):f?d.selectmenu("enable"):d.selectmenu("disable");break;default:f?d.textinput("enable"):d.textinput("disable")}}},ko.bindingHandlers.jqmchecked={init:function(a,b,c){({init:ko.bindingHandlers.checked.init(a,b,c)}),$(a).checkboxradio()},update:function(a,b){var c,d;c=b(),d=ko.unwrap(c),$(a).checkboxradio("refresh")}},ko.bindingHandlers.jqmselectedOptions={init:function(a,b){var c,d;return d=b(),c=$(a),c.on("change",function(a){return function(){var a;return a=c.val(),null==a&&(a=[]),d(a)}}(this))},update:function(a,b){var c,d;d=b(),c=$(a),c.val(d()),c.selectmenu("refresh",!0)}},ko.bindingHandlers.jqmflipswitch={init:function(a,b){var c,d;return d=b(),c=$(a),c.flipswitch(),ko.isObservable(d)?c.on("change",function(a){return function(){var a;switch(a=c.val()){case"true":a=!0;break;case"false":a=!1}return ko.unwrap(d)!==a?d(a):void 0}}(this)):void 0},update:function(a,b){var c,d,e;d=b(),e=ko.unwrap(d),c=$(a),"boolean"==typeof e&&(e=""+e),c.val(e),c.flipswitch("refresh")}},ko.bindingHandlers.jqmoptions={init:function(a,b,c){ko.bindingHandlers.options.init(a,b,c),$(a).selectmenu()},update:function(a,b,c){var d,e;ko.bindingHandlers.options.update(a,b,c),d=null!=(e=c())?e.value():void 0,null!=d&&$(a).val(d),$(a).selectmenu("refresh")}},ko.bindingHandlers.jqmlistview={init:function(a,b,c){setTimeout(function(){return $(a).listview()},1)},update:function(a,b,c){b(),setTimeout(function(){var b;try{return $(a).listview("refresh")}catch(c){b=c}},1)}},ko.bindingHandlers.jqmtextinput={init:function(a,b,c){$(a).textinput({enhanced:!0}),ko.bindingHandlers.textInput.init(a,b,c)}},ko.bindingHandlers.sparkline={init:function(a,b){return ko.bindingHandlers.sparkline.update(a,b),setTimeout(function(){return $.sparkline_display_visible()},100)},update:function(a,b){var c,d,e,f;return e=b(),f=ko.unwrap(e),c=ko.unwrap(f.data),d=f.tooltipFormatter,$(a).sparkline(c,{disableTooltips:!0,height:19,type:"line",lineColor:"#7c7c7c",fillColor:"#cccccc",spotColor:"#666666",minSpotColor:null,maxSpotColor:null,highlightSpotColor:null,highlightLineColor:null,drawNormalOnTop:!1,tooltipFormatter:d})}},ko.bindingHandlers.toast={init:function(a,b){var c,d,e,f;return e=b(),f=ko.unwrap(e),c=$(a),c.text(f),c.toast(),c.toast("show"),d=c.outerHeight()+2,c.parent().find(".ui-toast").each(function(){var b,c;this!==a&&(b=$(this),b.addClass("animated-toast"),c=b.data("top")+d,b.css("top",c+"px"),b.data("top",c))})}},ko.bindingHandlers.tooltip={init_tooltip:function(a,b,c){var d,e,f,g;return d=Math.min(c.parent().height(),$(window).height()),e=Math.min(c.parent().width(),$(window).width()),e<1.5*b.outerWidth()?b.css("max-width",e/2):b.css("max-width",340),f=a.offset().left+a.outerWidth()/2-b.outerWidth()/2,g=a.offset().top-b.outerHeight()-20,0>f?(f=a.offset().left+a.outerWidth()/2-20,b.addClass("left")):b.removeClass("left"),f+b.outerWidth()>e?(f=a.offset().left-b.outerWidth()+a.outerWidth()/2+20,b.addClass("right")):b.removeClass("right"),g+b.outerHeight()+30>d?(g-=10,b.removeClass("top")):(g=a.offset().top+a.outerHeight()-10,b.addClass("top")),b.removeClass("animated-tooltip").css({left:f,top:g,opacity:0}),b[0].offsetWidth=b[0].offsetWidth,b.addClass("animated-tooltip").css({top:g+20}).animate({opacity:1},100),b},remove_tooltip:function(a,b){return ko.bindingHandlers.tooltip.doRemove=!0,b.animate({opacity:0},200,function(a){return function(){return ko.bindingHandlers.tooltip.doRemove?b.removeClass("animated-tooltip").remove():void 0}}(this))},init:function(b,c){var d,e;return d=$(b),e=c(),d.bind("vclick",function(){var b,f,g,h,i,j,k;return i=ko.unwrap(e),i&&""!==i?(j=$("#tooltip"),0===j.length&&(j=$('<div id="tooltip" class="ui-corner-all"></div>'),j.css("opacity",0).html(i).appendTo("body")),ko.bindingHandlers.tooltip.doRemove=!1,null!=(k=ko.bindingHandlers.tooltip.subscribtion)&&k.dispose(),clearInterval(ko.bindingHandlers.tooltip.interval),clearTimeout(ko.bindingHandlers.tooltip.timeout),$(window).off("touchstart",ko.bindingHandlers.tooltip.touchdispose),b=d.parents(".owl-item"),0===b.length&&(b=d.parents(".ui-content.overthrow")),ko.bindingHandlers.tooltip.init_tooltip(d,j,b),ko.bindingHandlers.tooltip.subscribtion=ko.computed(function(a){return function(){return i=c()(),j.html(i),ko.bindingHandlers.tooltip.init_tooltip(d,j,b)}}(this)),h=function(a){return function(a){var c;return clearInterval(ko.bindingHandlers.tooltip.interval),clearTimeout(ko.bindingHandlers.tooltip.timeout),ko.bindingHandlers.tooltip.subscribtion.dispose(),$(window).off("touchstart",ko.bindingHandlers.tooltip.touchdispose),b.off("scroll",h),j.off("vclick",h),"undefined"!=typeof g&&null!==g&&d.off("mouseleave",g),null!=a&&0!==$(a.target).parents("#tooltip").length&&(c=$(a.target).attr("href"),(""===c||c.match(/^#.*/))&&a.preventDefault(),a.stopImmediatePropagation(),$(a.target).click()),ko.bindingHandlers.tooltip.remove_tooltip(d,j),!0}}(this),f=a.call(window,"ontouchstart")>=0,f||d.one("mouseleave",g=function(a){return clearInterval(ko.bindingHandlers.tooltip.interval),ko.bindingHandlers.tooltip.interval=setInterval(function(){return 0===$("#tooltip:hover").length?h():void 0},1e3)}),clearTimeout(ko.bindingHandlers.tooltip.timeout),ko.bindingHandlers.tooltip.touchdispose=h,ko.bindingHandlers.tooltip.timeout=setTimeout(function(){return j.one("vclick",h),$(window).one("touchstart",ko.bindingHandlers.tooltip.touchdispose)},310),void b.one("scroll",h)):!1})}},b=function(a){return this.element=a,this.$element=$(a),this.scrollMargin=Math.floor(this.$element.innerHeight()/10),this.offset=this.$element.offset(),this.innerHeight=this.$element.innerHeight(),this.scrollDeltaMin=5,this.scrollDeltaMax=30},b.prototype.scroll=function(a,b){var c,d,e,f,g,h;return h=this.scrollMargin+this.offset.top,g=void 0,d=0,h>b&&(g=(h-b)/this.scrollMargin,d=-(g*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin)),c=this.offset.top+this.innerHeight-this.scrollMargin,b>c&&(g=(b-c)/this.scrollMargin,d=g*(this.scrollDeltaMax-this.scrollDeltaMin)+this.scrollDeltaMin),0!==d&&(e=this.$element.scrollTop(),f=this.$element.scrollTop(e+d),d=this.$element.scrollTop()-e),d},ko.bindingHandlers.sortable={init:function(a,c,d,e,f){var g,h,i;return i=c(),h=i.items,g=function(b){return function(b){var c,d,e,f,g;return f=null,d=null,g=null,e=null,c=b.offset(),$(a).find(".sortable").each(function(a,h){var i,j,k;if(h!==b[0])if(i=$(h).offset(),i.top<c.top){if(null==g||i.top>g.top)return j=[h,i],f=j[0],g=j[1],j}else if(i.top>c.top&&(null==e||i.top<e.top))return k=[h,i],d=k[0],e=k[1],k}),{eleBefore:f,eleAfter:d}}}(this),$(a).on("MSPointerDown touchstart mousedown",".handle",function(c){var d,f,j,k,l,m,n,o;return f=$(this).parents(".sortable"),m=function(b){return function(){var b,c,d,e,h,i,j,k,l;return j=f.offset(),h=f.outerHeight(),j.bottom=j.top+h,l=g(f),d=l.eleBefore,b=l.eleAfter,k=$(a).find(".sortable"),k.each(function(a,b){return b!==f[0]?($(b).css("margin-bottom",0),$(b).css("margin-top",0)):void 0}),k.length>1?null!=d?(e=$(d).offset(),e.width=$(d).outerHeight(),e.middle=e.top+e.width/2,e.bottom=e.top+e.width,j.top<e.middle?$(d).css("margin-top",h):null!=b?(c=$(b).offset(),c.width=$(b).outerHeight(),c.middle=c.top+c.width/2,j.bottom>c.middle&&j.top>e.bottom+h/2?$(b).css("margin-bottom",h):$(d).css("margin-bottom",h)):$(d).css("margin-bottom",h)):null!=b&&$(b).css("margin-top",h):f.css("margin-bottom",""),i=j.top-f.offset().top,0!==i?f.data("plugin_pep").doMoveTo(0,i):void 0}}(this),l=function(a){return function(){var a,b,c,d,j,k,l,m,n,o,p;if(p=g(f),d=p.eleBefore,c=p.eleAfter,null!==d||null!==c)if(j=ko.dataFor(f[0]),b=null!=d?ko.dataFor(d):void 0,a=null!=c?ko.dataFor(c):void 0,null!=h){if(m=h.indexOf(j),n=null!=d?(k=h.indexOf(b)+1,k>m?k--:void 0,k):0,m>=0&&n>=0&&m!==n&&(o=ko.utils.unwrapObservable(h),l=o[m],h.valueWillMutate(),o.splice(m,1),o.splice(n,0,l),h.valueHasMutated(),null!=i.sorted))return i.sorted.call(e,j,b,a)}else if(null!=i.sorted)return i.sorted.call(e,j,b,a)}}(this),n=null,o=null,j=null,k=null,d=null,f.pep({place:!1,axis:"y",shouldEase:!1,constrainTo:"parent",droppable:i.droppable||".droppable",overlapFunction:function(a){return function(a,b){var c,d,e;return d=a[0].getBoundingClientRect(),e=b[0].getBoundingClientRect(),c=e.bottom-d.bottom>-20&&e.bottom-d.bottom<10}}(this),start:function(c){return function(){var c,e,g;return $(a).css("height",$(a).height()),clearTimeout(d),null!=i.isSorting&&i.isSorting(!0),$(a).addClass("noAnimation"),f.css("margin-bottom",-f.innerHeight()),g=$(a).parents(i.scroller||".ui-content.overthrow"),j=new b(g[0]),c=null,e=null,k=setInterval(function(){var a;return a=j.scroll(n,o),0!==a?f.data("plugin_pep").doMoveTo(0,a):void 0},100)}}(this),stop:function(b){return function(b,c){var g,h;return clearTimeout(k),g=c.activeDropRegions.length>0,$(c.activeDropRegions).each(function(a,b){return null!=i.drop?i.drop.call(e,ko.dataFor(f[0]),b):void 0}),g||l(),h=f.data("plugin_pep"),$.pep.unbind(f),$(a).find(".sortable").attr("style",""),$(a).css("height",""),null!=i.isSorting&&i.isSorting(!1),d=setTimeout(function(){return $(a).removeClass("noAnimation")},100),f.removeClass("ui-btn-active")}}(this),drag:function(a){return function(a,b){return n=a.pageX,o=a.pageY,m(),!0}}(this)}),f.data("plugin_pep").handleStart(c),c.stopImmediatePropagation()})}},ko.bindingHandlers.jqmselectvalue={init:function(a,b,c,d){var e;return"undefined"!=typeof ko.bindingHandlers.value.init&&ko.bindingHandlers.value.init(a,b,c,d),e=b(),ko.unwrap(e)},update:function(a,b,c,d){var e;return"undefined"!=typeof ko.bindingHandlers.value.update&&ko.bindingHandlers.value.update(a,b,c,d),$(a).selectmenu("refresh",!0),e=b(),ko.unwrap(e)}},ko.bindingHandlers.dragslide={init:function(a,b,c,d,e){var f,g,h,i,j,k,l;k=b(),l=ko.toJS(k),f=l.options||{},$(a).css({overflow:"hidden"}),$(a).on("selectstart mousedown",function(a){return a.preventDefault()}),j=function(a){return function(a,b){return $(".drag-message").text(b).css({top:a.position().top,height:a.outerHeight(),"line-height":a.outerHeight()+"px"}).fadeIn(500)}}(this),h=null,g=!1,$(a).on("click",function(a){return g?a.preventDefault():h=null}),i=null,$(a).on("vmousedown",".draggable",function(a){return function(a){return i=$(a.target).parents(".draggable"),(null!=i?i.length:void 0)?h=a:void 0}}(this)),$(a).on("vmousemove",".draggable",function(a){return function(a){var b,c,d,e,f,k;return k=$(a.target).parents(".draggable"),null!=h&&(null!=k?k.length:void 0)&&(null!=i?i.length:void 0)&&i[0]===k[0]?(c=Math.abs(a.pageX-h.pageX),d=Math.abs(a.pageY-h.pageY),c>d&&c>5?(a.preventDefault(),a.stopPropagation(),h.preventDefault(),e=ko.dataFor(k[0]),b=null,f=k.position(),k.pep({place:!1,axis:"x",shouldEase:!0,revert:!0,shouldPreventDefault:!1,start:function(a,b){return g=!0},rest:function(a,b){var c;return c=k.data("plugin_pep"),$.pep.unbind(k),k.attr("style",""),g=!1},drag:function(a,c){var d;return d=k.position().left-f.left,-120>d?"deactivate"!==b&&(j(k,__("deactivate rule")).addClass("deactivate").removeClass("activate"),b="deactivate"):d>120?"activate"!==b&&(j(k,__("activate rule")).addClass("activate").removeClass("deactivate"),b="activate"):null!=b&&($(".drag-message").fadeOut(500),b=null),!0},stop:function(a,c){var d;return $(".drag-message").text("").fadeOut().removeClass("activate").removeClass("deactivate"),null!=b&&(d="activate"===b,pimatic.loading("saveactivate","show",{text:__(b)}),pimatic.client.rest.updateRuleByString({ruleId:e.id,rule:{active:d}}).always(function(){return pimatic.loading("saveactivate","hide")}).done(ajaxShowToast).fail(ajaxAlertFail)),k.removeClass("ui-btn-active")}}),k.data("plugin_pep").revert=function(){return this.shouldUseCSSTranslation()&&this.moveToUsingTransforms(-this.xTranslation(),0),this.moveTo(this.initialPosition.left,0)},k.data("plugin_pep").handleStart(h),h=null):void 0):(i=null,void(h=null))}}(this))}}}()}).call(this);